// ========================================
// formulaires Spip
// ========================================

@use "sass:map";
@use "../abstracts";
@use "sass-rem/rem";

// [1] Styles communs Ã  tous les formulaires spip
// [2] Formulaire recherche (modales)


// [1] Styles communs
// ========================================

.formulaire_spip {
  // legend {
  //   margin-bottom: 1.5rem;
  //   font-size: 1.5rem;
  //   line-height: 1.5rem;
  //   color: $color-primary-500;
  // }

  label {
    display: block;
    margin-bottom: 0.5rem;
  }

  //
  // Reset des styles
  // https://codyhouse.co/blog/post/vertical-text-alignment-in-buttons-and-inputs
  //
  input,
  textarea,
  select,
  button {
    background-color: transparent;
    padding: 0;
    border: 0;
    border-radius: 0;
    color: inherit;
    appearance: none;
    font-weight: 500;
    font-size: 1rem;
    line-height: 1.5;
    padding: 0.5rem;
    border-width: rem.convert(2px);
    border-style: solid;
  }

  button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    padding: 0.5rem;
  }

  //
  // Quelques styles communs de base
  //
  input[type="text"],
  input[type="search"],
  input[type="email"],
  textarea,
  select {
    border: rem.convert(1px) solid rgba(map.get(abstracts.$gray, "blue", "600"), 0.2);
    background-color: rgba(map.get(abstracts.$gray, "blue", "700"), 0.5);
    transition: background-color 0.3s ease;
    color: map.get(abstracts.$site-colors, "text-invert");

    &:focus {
      background-color: abstracts.$white;
    }
  }

  input[type="submit"],
  button[type="submit"] {
    border-color: transparent;
    background-color: map.get(abstracts.$site-colors, "background-invert");
    color: map.get(abstracts.$site-colors, "text-invert");
    transition: background 0.3s ease;

    &:hover {
      background-color: map.get(abstracts.$site-colors, "link-hover");
    }
  }

  input,
  textarea {
    &::placeholder {
      color: map.get(abstracts.$gray, "blue", "300");
      font-style: italic;
    }
  }

  .editer {
    margin-bottom: 1.5rem;
  }

  .erreur_message {
    // color: $color-secondary-600;
    font-style: italic;
  }

  .reponse_formulaire {
    padding: 0.25rem 0.5rem;
    // border-radius: 5px;

    // &.reponse_formulaire_erreur {
    //   color: $color-secondary-500;
    //   border: 2px solid $color-secondary-500;
    // }

    // &.reponse_formulaire_ok {
    //   border: 2px solid $color-primary-500;
    // }
  }
}


// [2] Formulaire recherche (modales)
// ========================================
// reference https://css-tricks.com/show-search-button-when-search-field-is-non-empty

// Largeur du bouton submit
$searchbox-btn-width: 7.5rem;

.l-recherche_form {
  position: relative;
  z-index: inherit;
  overflow: hidden;
}

.l-recherche_label {
  font-weight: 600;
  font-size: rem.convert(20px);
}

input[type="search"].l-recherche_input {
  border-radius: 0.25rem;
  padding-right: calc(#{$searchbox-btn-width} + 0.5rem);
  width: 100%;

  &:not(:placeholder-shown) ~ .l-recherche_btn {
    transform: translateX(-100%);
  }
}

button[type="submit"].l-recherche_btn {
  border-radius: 0.25rem;
  border-width: rem.convert(1px);
  background-color: map.get(abstracts.$purple-deep, "700");
  color: map.get(abstracts.$site-colors, "text");
  position: absolute;
  bottom: 0;
  left: 100%;
  width: $searchbox-btn-width;
  transition: transform 0.4s ease;
}
